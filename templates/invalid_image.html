{% extends "base.html" %}

{% block title %}·∫¢nh kh√¥ng h·ª£p l·ªá - Dental AI{% endblock %}

{% block content %}
<div class="container">
    <!-- Invalid Image Header -->
    <div class="result-header">
        <h1>‚ö†Ô∏è ·∫¢nh kh√¥ng h·ª£p l·ªá</h1>
        <p>·∫¢nh b·∫°n t·∫£i l√™n kh√¥ng ph·∫£i l√† ·∫£nh X-quang nha khoa</p>
    </div>

    <!-- Invalid Image Grid -->
    <div class="result-grid">
        <!-- Image Section -->
        <div class="result-image-card">
            <h3>·∫¢nh ƒë√£ t·∫£i l√™n</h3>
            <img src="{{ url_for('static', filename='uploads/' + filename) }}" alt="Uploaded Image">
            <div class="image-info">
                <p style="margin-top: 16px; color: #757575; font-size: 0.9rem;">
                    <strong>ƒêi·ªÉm ƒë√°nh gi√°:</strong> {{ confidence }}/100
                </p>
            </div>
        </div>

        <!-- Error Explanation Section -->
        <div class="result-diagnosis-card">
            <h3>T·∫°i sao ·∫£nh kh√¥ng h·ª£p l·ªá?</h3>
            
            <div class="error-explanation">
                <div class="error-icon">üö´</div>
                <div class="error-message">
                    <h4>{{ reason }}</h4>
                    <p>H·ªá th·ªëng ph√°t hi·ªán ·∫£nh c·ªßa b·∫°n kh√¥ng c√≥ ƒë·∫∑c ƒëi·ªÉm c·ªßa ·∫£nh X-quang nha khoa.</p>
                </div>
            </div>

            <div class="requirements-box">
                <h4>üìã Y√™u c·∫ßu v·ªÅ ·∫£nh X-quang nha khoa:</h4>
                <ul class="requirements-list">
                    <li>‚úì ·∫¢nh ph·∫£i l√† X-quang ch·ª•p rƒÉng (kh√¥ng ph·∫£i ·∫£nh th∆∞·ªùng)</li>
                    <li>‚úì ·∫¢nh c√≥ m√†u x√°m ho·∫∑c xanh lam nh·∫°t (kh√¥ng c√≥ nhi·ªÅu m√†u s·∫Øc)</li>
                    <li>‚úì C√≥ ƒë·ªô t∆∞∆°ng ph·∫£n cao gi·ªØa v√πng rƒÉng (s√°ng) v√† n·ªÅn (t·ªëi)</li>
                    <li>‚úì Nh√¨n th·∫•y r√µ c·∫•u tr√∫c rƒÉng, x∆∞∆°ng h√†m</li>
                    <li>‚úì File ƒë·ªãnh d·∫°ng: PNG, JPG, JPEG</li>
                </ul>
            </div>

            <div class="examples-section">
                <h4>‚úÖ V√≠ d·ª• ·∫£nh X-quang nha khoa h·ª£p l·ªá:</h4>
                <div class="example-images">
                    <div class="example-item">
                        <div class="example-placeholder">
                            <span style="font-size: 48px;">ü¶∑</span>
                            <p>·∫¢nh X-quang panoramic<br>(to√†n c·∫£nh)</p>
                        </div>
                    </div>
                    <div class="example-item">
                        <div class="example-placeholder">
                            <span style="font-size: 48px;">üì∑</span>
                            <p>·∫¢nh X-quang periapical<br>(v√πng rƒÉng ƒë∆°n l·∫ª)</p>
                        </div>
                    </div>
                    <div class="example-item">
                        <div class="example-placeholder">
                            <span style="font-size: 48px;">üî¨</span>
                            <p>·∫¢nh X-quang bitewing<br>(c·∫Øn c√°nh)</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tips-box">
                <h4>üí° G·ª£i √Ω:</h4>
                <ul class="tips-list">
                    <li>H√£y ch·∫Øc ch·∫Øn b·∫°n ƒëang t·∫£i l√™n ·∫£nh X-quang ch·ª•p rƒÉng</li>
                    <li>N·∫øu l√† ·∫£nh ch·ª•p t·ª´ ƒëi·ªán tho·∫°i, h√£y ch·ª•p l·∫°i v·ªõi √°nh s√°ng t·ªët h∆°n</li>
                    <li>Tr√°nh t·∫£i l√™n ·∫£nh ch·ª•p rƒÉng th√¥ng th∆∞·ªùng (kh√¥ng ph·∫£i X-quang)</li>
                    <li>N·∫øu v·∫´n g·∫∑p l·ªói v·ªõi ·∫£nh X-quang th·∫≠t, vui l√≤ng li√™n h·ªá h·ªó tr·ª£</li>
                </ul>
            </div>

            <div class="result-actions">
                <a href="{{ url_for('index') }}" class="btn btn-primary">
                    <span>‚Üª</span> T·∫£i ·∫£nh kh√°c
                </a>
            </div>
        </div>
    </div>
</div>

<style>
/* Invalid Image Styles */
.error-explanation {
    display: flex;
    gap: 16px;
    padding: 20px;
    background: #FFEBEE;
    border-radius: 8px;
    border-left: 4px solid #F44336;
    margin-bottom: 24px;
}

.error-icon {
    font-size: 48px;
}

.error-message h4 {
    font-size: 1.1rem;
    font-weight: 600;
    color: #C62828;
    margin-bottom: 8px;
}

.error-message p {
    color: #D32F2F;
    line-height: 1.6;
}

.requirements-box,
.tips-box {
    background: #E3F2FD;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 24px;
}

.requirements-box h4,
.tips-box h4 {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 12px;
    color: #1565C0;
}

.requirements-list,
.tips-list {
    list-style: none;
    padding-left: 0;
}

.requirements-list li,
.tips-list li {
    padding: 8px 0;
    padding-left: 28px;
    position: relative;
    line-height: 1.6;
}

.requirements-list li:before {
    content: "";
    position: absolute;
    left: 0;
    top: 12px;
    width: 6px;
    height: 6px;
    background: #1976D2;
    border-radius: 50%;
}

.tips-list li:before {
    content: "‚Üí";
    position: absolute;
    left: 8px;
    color: #1976D2;
    font-weight: bold;
}

.examples-section {
    margin-bottom: 24px;
}

.examples-section h4 {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 16px;
}

.example-images {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

.example-item {
    text-align: center;
}

.example-placeholder {
    padding: 24px;
    background: #F5F5F5;
    border-radius: 8px;
    border: 2px dashed #BDBDBD;
}

.example-placeholder p {
    margin-top: 12px;
    font-size: 0.85rem;
    color: #757575;
    line-height: 1.4;
}

@media (max-width: 768px) {
    .example-images {
        grid-template-columns: 1fr;
    }
    
    .error-explanation {
        flex-direction: column;
        text-align: center;
    }
}
</style>
{% endblock %}
